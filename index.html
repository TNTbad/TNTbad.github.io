<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä PRO</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f0f8f0 0%, #e0f0e0 100%);
            color: #2d4a2d;
            line-height: 1.6;
            min-height: 100vh;
            padding: 15px;
        }

        .app {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(46, 125, 50, 0.15);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        /* –®–∞–ø–∫–∞ */
        .app-header {
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
            color: white;
            padding: 1.2rem 1.5rem;
            text-align: center;
            border-bottom: 3px solid #81c784;
            position: relative;
        }

        .app-header h1 {
            margin-bottom: 0.8rem;
            font-size: 1.8rem;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .user-section {
            position: absolute;
            right: 20px;
            top: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }

        .app-header nav {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .nav-btn {
            padding: 10px 16px;
            border: none;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
            min-width: 80px;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .app-main {
            padding: 1.5rem;
            min-height: 500px;
        }

        .module-container {
            max-width: 1000px;
            margin: 0 auto;
            animation: fadeIn 0.5s ease;
        }

        .module-title {
            font-size: 1.6rem;
            margin-bottom: 1.2rem;
            color: #2e7d32;
            text-align: center;
            border-bottom: 2px solid #c8e6c9;
            padding-bottom: 0.5rem;
            font-weight: 600;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∑–∞–¥–∞—á */
        .add-task-form {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            background: #f1f8e9;
            padding: 18px;
            border-radius: 15px;
            border: 1px solid #c5e1a5;
        }

        .add-task-form input,
        .add-task-form select,
        .add-task-form textarea {
            padding: 12px 15px;
            border: 2px solid #a5d6a7;
            border-radius: 10px;
            flex-grow: 1;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
            color: #33691e;
        }

        .add-task-form input:focus,
        .add-task-form select:focus,
        .add-task-form textarea:focus {
            outline: none;
            border-color: #4caf50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        .add-task-form button {
            padding: 12px 20px;
            background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 3px 8px rgba(76, 175, 80, 0.3);
        }

        .add-task-form button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .task-filters {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 8px 16px;
            background: #e8f5e9;
            border: 2px solid #c8e6c9;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            color: #388e3c;
            font-weight: 500;
        }

        .filter-btn.active {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
            box-shadow: 0 3px 8px rgba(76, 175, 80, 0.3);
        }

        .task-list {
            list-style: none;
        }

        .task-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            background: #f1f8e9;
            transition: all 0.3s;
            border-left: 4px solid #66bb6a;
            border: 1px solid #c5e1a5;
            position: relative;
        }

        .task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.15);
        }

        .task-item.completed {
            opacity: 0.8;
            border-left-color: #81c784;
            background: #e8f5e9;
        }

        .task-checkbox {
            margin-right: 15px;
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: #4caf50;
        }

        .task-content {
            flex-grow: 1;
        }

        .task-text {
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: #2e7d32;
            font-weight: 500;
        }

        .task-item.completed .task-text {
            text-decoration: line-through;
            color: #689f38;
        }

        .task-meta {
            display: flex;
            gap: 10px;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }

        .task-tag {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .tag-work { background: #ffebee; color: #c62828; }
        .tag-personal { background: #e8f5e9; color: #2e7d32; }
        .tag-health { background: #e3f2fd; color: #1565c0; }
        .tag-learning { background: #fff8e1; color: #f57f17; }

        .task-priority {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .priority-high { background: #ffebee; color: #c62828; }
        .priority-medium { background: #fff8e1; color: #f57f17; }
        .priority-low { background: #e8f5e9; color: #2e7d32; }

        .task-actions {
            display: flex;
            gap: 8px;
        }

        .task-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            font-weight: 500;
        }

        .btn-delete {
            background: #ffebee;
            color: #c62828;
        }

        .btn-delete:hover {
            background: #ffcdd2;
        }

        .btn-comment {
            background: #e3f2fd;
            color: #1565c0;
        }

        .btn-comment:hover {
            background: #bbdefb;
        }

        .task-comments {
            margin-top: 10px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border: 1px solid #c8e6c9;
        }

        .comment {
            padding: 8px;
            margin-bottom: 5px;
            background: #f9f9f9;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ */
        .timer-container {
            text-align: center;
            padding: 1.5rem;
        }

        .timer-display {
            font-size: 3.5rem;
            font-weight: bold;
            color: #2e7d32;
            margin: 1.5rem 0;
            font-family: 'Courier New', monospace;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .timer-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .btn-start {
            background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
            color: white;
        }

        .btn-pause {
            background: linear-gradient(135deg, #ffb74d 0%, #ff9800 100%);
            color: white;
        }

        .btn-reset {
            background: linear-gradient(135deg, #ef5350 0%, #d32f2f 100%);
            color: white;
        }

        .timer-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }

        .timer-settings {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .timer-setting {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .timer-setting label {
            font-size: 0.9rem;
            color: #558b2f;
            font-weight: 500;
        }

        .timer-setting input {
            width: 70px;
            padding: 10px;
            border: 2px solid #a5d6a7;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            color: #2e7d32;
            background: white;
        }

        .timer-setting input:focus {
            outline: none;
            border-color: #4caf50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        .timer-mode {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 10px 20px;
            border: 2px solid #c8e6c9;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: #388e3c;
            font-weight: 500;
        }

        .mode-btn.active {
            border-color: #4caf50;
            background: #4caf50;
            color: white;
            box-shadow: 0 3px 8px rgba(76, 175, 80, 0.3);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç—Ä–µ–∫–µ—Ä–∞ –ø—Ä–∏–≤—ã—á–µ–∫ */
        .habits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 18px;
            margin-top: 1.5rem;
        }

        .habit-card {
            background: white;
            border-radius: 15px;
            padding: 18px;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.1);
            transition: all 0.3s;
            border: 1px solid #c8e6c9;
        }

        .habit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.15);
        }

        .habit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .habit-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2e7d32;
        }

        .habit-streak {
            background: #fff8e1;
            color: #f57f17;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .habit-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 12px;
        }

        .calendar-day {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .day-completed {
            background: #4caf50;
            color: white;
            box-shadow: 0 2px 5px rgba(76, 175, 80, 0.3);
        }

        .day-missed {
            background: #ffebee;
            color: #c62828;
        }

        .day-empty {
            background: #f5f5f5;
            color: #9e9e9e;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ü–µ–ª–µ–π –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ */
        .goals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 1.5rem;
        }

        .goal-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.1);
            border: 1px solid #c8e6c9;
            transition: all 0.3s;
        }

        .goal-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.15);
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .goal-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2e7d32;
        }

        .goal-deadline {
            background: #e3f2fd;
            color: #1565c0;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .goal-progress {
            margin: 15px 0;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            font-size: 0.9rem;
            color: #689f38;
            font-weight: 500;
            margin-top: 5px;
        }

        .goal-subtasks {
            margin-top: 15px;
        }

        .subtask {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: #f9f9f9;
            border-radius: 6px;
            margin-bottom: 5px;
        }

        .subtask input[type="checkbox"] {
            accent-color: #4caf50;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 18px;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.1);
            text-align: center;
            border: 1px solid #c8e6c9;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-3px);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #4caf50;
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .stat-label {
            color: #689f38;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.1);
            margin-top: 1.5rem;
            border: 1px solid #c8e6c9;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ */
        .sync-section {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #c8e6c9;
        }

        .sync-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .sync-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .sync-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .app {
                border-radius: 15px;
            }
            
            .app-header {
                padding: 1rem;
            }
            
            .app-header h1 {
                font-size: 1.5rem;
                margin-bottom: 0.5rem;
            }
            
            .user-section {
                position: static;
                justify-content: center;
                margin-bottom: 15px;
            }
            
            .app-header nav {
                gap: 5px;
            }
            
            .nav-btn {
                padding: 8px 12px;
                font-size: 0.8rem;
                min-width: 70px;
            }
            
            .app-main {
                padding: 1rem;
            }
            
            .module-title {
                font-size: 1.4rem;
                margin-bottom: 1rem;
            }
            
            .add-task-form {
                flex-direction: column;
                padding: 15px;
                gap: 12px;
            }
            
            .task-filters {
                gap: 6px;
            }
            
            .filter-btn {
                padding: 6px 12px;
                font-size: 0.85rem;
            }
            
            .task-item {
                flex-direction: column;
                align-items: flex-start;
                padding: 12px;
            }
            
            .task-checkbox {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .task-actions {
                margin-top: 10px;
                align-self: stretch;
                justify-content: flex-end;
            }
            
            .task-btn {
                padding: 8px 14px;
                flex-grow: 1;
            }
            
            .timer-display {
                font-size: 2.8rem;
                margin: 1rem 0;
            }
            
            .timer-controls {
                gap: 8px;
            }
            
            .timer-btn {
                padding: 10px 18px;
                font-size: 0.9rem;
            }
            
            .timer-settings {
                flex-direction: column;
                gap: 12px;
            }
            
            .timer-setting {
                flex-direction: row;
                justify-content: center;
                gap: 10px;
            }
            
            .timer-setting input {
                width: 60px;
            }
            
            .timer-mode {
                gap: 10px;
            }
            
            .mode-btn {
                padding: 8px 16px;
                font-size: 0.9rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            .stat-value {
                font-size: 2rem;
            }
            
            .habits-grid,
            .goals-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .habit-card,
            .goal-card {
                padding: 15px;
            }
            
            .calendar-day {
                width: 28px;
                height: 28px;
                font-size: 0.8rem;
            }
            
            .chart-container {
                padding: 15px;
                margin-top: 1rem;
            }
            
            .sync-buttons {
                flex-direction: column;
            }
            
            .sync-btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .app-header h1 {
                font-size: 1.3rem;
            }
            
            .nav-btn {
                padding: 7px 10px;
                font-size: 0.75rem;
                min-width: 60px;
            }
            
            .timer-display {
                font-size: 2.2rem;
            }
            
            .timer-btn {
                padding: 8px 14px;
                font-size: 0.85rem;
            }
            
            .module-title {
                font-size: 1.2rem;
            }
            
            .task-text {
                font-size: 1rem;
            }
            
            .task-meta {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <header class="app-header">
            <h1>–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä PRO</h1>
            <div class="user-section">
                <div class="user-avatar" id="user-avatar" title="–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ GitHub">üë§</div>
            </div>
            <nav>
                <button class="nav-btn" data-tab="dashboard">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                <button class="nav-btn" data-tab="tasks">–ó–∞–¥–∞—á–∏</button>
                <button class="nav-btn" data-tab="goals">–¶–µ–ª–∏</button>
                <button class="nav-btn" data-tab="timer">–¢–∞–π–º–µ—Ä</button>
                <button class="nav-btn" data-tab="habits">–ü—Ä–∏–≤—ã—á–∫–∏</button>
                <button class="nav-btn" data-tab="sync">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</button>
            </nav>
        </header>
        
        <main class="app-main">
            <!-- –î–∞—à–±–æ—Ä–¥ -->
            <div id="dashboard" class="module-container">
                <h2 class="module-title">–û–±—â–∞—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="current-tasks">0</div>
                        <div class="stat-label">–¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="completed-tasks">0</div>
                        <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ –∑–∞–¥–∞—á</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="productivities">0</div>
                        <div class="stat-label">–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="habit-streak">0</div>
                        <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥ —Å –ø—Ä–∏–≤—ã—á–∫–∞–º–∏</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="productivity-chart"></canvas>
                </div>

                <div class="chart-container">
                    <canvas id="weekly-chart"></canvas>
                </div>
            </div>
            
            <!-- –ó–∞–¥–∞—á–∏ -->
            <div id="tasks" class="module-container" style="display: none;">
                <h2 class="module-title">–ú–æ–∏ –ó–∞–¥–∞—á–∏</h2>
                <div class="add-task-form">
                    <input type="text" id="new-task-input" placeholder="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É...">
                    <select id="task-tag">
                        <option value="work">–†–∞–±–æ—Ç–∞</option>
                        <option value="personal">–õ–∏—á–Ω–æ–µ</option>
                        <option value="health">–ó–¥–æ—Ä–æ–≤—å–µ</option>
                        <option value="learning">–û–±—É—á–µ–Ω–∏–µ</option>
                    </select>
                    <select id="task-priority">
                        <option value="high">–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                        <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                        <option value="low">–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                    </select>
                    <button id="add-task-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                
                <div class="task-filters">
                    <button class="filter-btn active" data-filter="current">–¢–µ–∫—É—â–∏–µ</button>
                    <button class="filter-btn" data-filter="completed">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</button>
                    <button class="filter-btn" data-filter="all">–í—Å–µ</button>
                </div>
                
                <ul class="task-list" id="task-list"></ul>
            </div>
            
            <!-- –¶–µ–ª–∏ –∏ –ø—Ä–æ–µ–∫—Ç—ã -->
            <div id="goals" class="module-container" style="display: none;">
                <h2 class="module-title">–ú–æ–∏ –¶–µ–ª–∏ –∏ –ü—Ä–æ–µ–∫—Ç—ã</h2>
                <div class="add-task-form">
                    <input type="text" id="new-goal-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏...">
                    <input type="date" id="goal-deadline">
                    <button id="add-goal-btn">–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—å</button>
                </div>
                
                <div class="goals-grid" id="goals-container"></div>
            </div>
            
            <!-- –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–π–º–µ—Ä -->
            <div id="timer" class="module-container" style="display: none;">
                <h2 class="module-title">–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–π–º–µ—Ä</h2>
                <div class="timer-container">
                    <div class="timer-display" id="timer-display">25:00</div>
                    <div class="timer-controls">
                        <button class="timer-btn btn-start" id="start-btn">–°—Ç–∞—Ä—Ç</button>
                        <button class="timer-btn btn-pause" id="pause-btn">–ü–∞—É–∑–∞</button>
                        <button class="timer-btn btn-reset" id="reset-btn">–°–±—Ä–æ—Å</button>
                    </div>
                    
                    <div class="timer-settings">
                        <div class="timer-setting">
                            <label for="work-time">–†–∞–±–æ—Ç–∞ (–º–∏–Ω)</label>
                            <input type="number" id="work-time" min="1" max="60" value="25">
                        </div>
                        <div class="timer-setting">
                            <label for="break-time">–ü–µ—Ä–µ—Ä—ã–≤ (–º–∏–Ω)</label>
                            <input type="number" id="break-time" min="1" max="30" value="5">
                        </div>
                    </div>
                    
                    <div class="timer-mode">
                        <button class="mode-btn active" data-mode="work">–†–∞–±–æ—Ç–∞</button>
                        <button class="mode-btn" data-mode="break">–ü–µ—Ä–µ—Ä—ã–≤</button>
                    </div>
                </div>
            </div>
            
            <!-- –¢—Ä–µ–∫–µ—Ä –ø—Ä–∏–≤—ã—á–µ–∫ -->
            <div id="habits" class="module-container" style="display: none;">
                <h2 class="module-title">–¢—Ä–µ–∫–µ—Ä –ü—Ä–∏–≤—ã—á–µ–∫</h2>
                <div class="add-task-form">
                    <input type="text" id="new-habit-input" placeholder="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –ø—Ä–∏–≤—ã—á–∫—É...">
                    <button id="add-habit-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                
                <div class="habits-grid" id="habits-container"></div>
            </div>
            
            <!-- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è -->
            <div id="sync" class="module-container" style="display: none;">
                <h2 class="module-title">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏</h2>
                
                <div class="sync-section">
                    <h3>GitHub –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h3>
                    <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ GitHub Gist</p>
                    <div class="sync-buttons">
                        <button class="sync-btn" id="github-login">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ GitHub</button>
                        <button class="sync-btn" id="github-sync">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å</button>
                    </div>
                </div>
                
                <div class="sync-section">
                    <h3>–†—É—á–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                    <p>–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é</p>
                    <div class="sync-buttons">
                        <button class="sync-btn" id="export-data">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                        <button class="sync-btn" id="import-data">–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                    </div>
                </div>
                
                <div class="sync-section">
                    <h3>–≠–∫—Å–ø–æ—Ä—Ç –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å</h3>
                    <p>–î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ –∑–∞–¥–∞—á–∏ –∏ —Ü–µ–ª–∏ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å</p>
                    <div class="sync-buttons">
                        <button class="sync-btn" id="export-calendar">–≠–∫—Å–ø–æ—Ä—Ç –≤ .ics</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // –ì–ª–∞–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const state = {
            tasks: JSON.parse(localStorage.getItem('productivity-tasks')) || [],
            goals: JSON.parse(localStorage.getItem('goals')) || [],
            productivities: parseInt(localStorage.getItem('productivities')) || 0,
            habits: JSON.parse(localStorage.getItem('habits')) || [],
            currentFilter: 'current',
            timer: {
                mode: 'work',
                workTime: 25,
                breakTime: 5,
                time: 25 * 60,
                isRunning: false,
                interval: null
            },
            user: {
                isLoggedIn: false,
                username: null,
                avatar: null
            }
        };

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const elements = {
            tabs: document.querySelectorAll('.nav-btn'),
            modules: document.querySelectorAll('.module-container'),
            // –ó–∞–¥–∞—á–∏
            taskInput: document.getElementById('new-task-input'),
            taskTag: document.getElementById('task-tag'),
            taskPriority: document.getElementById('task-priority'),
            addTaskBtn: document.getElementById('add-task-btn'),
            taskList: document.getElementById('task-list'),
            filterBtns: document.querySelectorAll('.filter-btn'),
            // –¶–µ–ª–∏
            goalInput: document.getElementById('new-goal-input'),
            goalDeadline: document.getElementById('goal-deadline'),
            addGoalBtn: document.getElementById('add-goal-btn'),
            goalsContainer: document.getElementById('goals-container'),
            // –¢–∞–π–º–µ—Ä
            timerDisplay: document.getElementById('timer-display'),
            startBtn: document.getElementById('start-btn'),
            pauseBtn: document.getElementById('pause-btn'),
            resetBtn: document.getElementById('reset-btn'),
            modeBtns: document.querySelectorAll('.mode-btn'),
            workTimeInput: document.getElementById('work-time'),
            breakTimeInput: document.getElementById('break-time'),
            // –ü—Ä–∏–≤—ã—á–∫–∏
            habitInput: document.getElementById('new-habit-input'),
            addHabitBtn: document.getElementById('add-habit-btn'),
            habitsContainer: document.getElementById('habits-container'),
            // –î–∞—à–±–æ—Ä–¥
            currentTasks: document.getElementById('current-tasks'),
            completedTasks: document.getElementById('completed-tasks'),
            productivities: document.getElementById('productivities'),
            habitStreak: document.getElementById('habit-streak'),
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
            githubLogin: document.getElementById('github-login'),
            githubSync: document.getElementById('github-sync'),
            exportData: document.getElementById('export-data'),
            importData: document.getElementById('import-data'),
            exportCalendar: document.getElementById('export-calendar'),
            // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            userAvatar: document.getElementById('user-avatar')
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function initApp() {
            setupEventListeners();
            renderTasks();
            renderGoals();
            updateDashboard();
            renderHabits();
            updateTimerDisplay();
            checkAuthStatus();
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ç–∞–π–º–µ—Ä–∞
            const savedWorkTime = localStorage.getItem('work-time');
            const savedBreakTime = localStorage.getItem('break-time');
            
            if (savedWorkTime) {
                state.timer.workTime = parseInt(savedWorkTime);
                elements.workTimeInput.value = state.timer.workTime;
            }
            
            if (savedBreakTime) {
                state.timer.breakTime = parseInt(savedBreakTime);
                elements.breakTimeInput.value = state.timer.breakTime;
            }
            
            updateTimerMode();
            
            // –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            if ('Notification' in window) {
                Notification.requestPermission();
            }
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ù–∞–≤–∏–≥–∞—Ü–∏—è
            elements.tabs.forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });

            // –ó–∞–¥–∞—á–∏
            elements.addTaskBtn.addEventListener('click', addTask);
            elements.taskInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addTask();
            });
            
            elements.filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    elements.filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    state.currentFilter = btn.dataset.filter;
                    renderTasks();
                });
            });

            // –¶–µ–ª–∏
            elements.addGoalBtn.addEventListener('click', addGoal);
            elements.goalInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addGoal();
            });

            // –¢–∞–π–º–µ—Ä
            elements.startBtn.addEventListener('click', startTimer);
            elements.pauseBtn.addEventListener('click', pauseTimer);
            elements.resetBtn.addEventListener('click', resetTimer);
            
            elements.modeBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    elements.modeBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    switchTimerMode(btn.dataset.mode);
                });
            });
            
            elements.workTimeInput.addEventListener('change', updateTimerSettings);
            elements.breakTimeInput.addEventListener('change', updateTimerSettings);

            // –ü—Ä–∏–≤—ã—á–∫–∏
            elements.addHabitBtn.addEventListener('click', addHabit);
            elements.habitInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addHabit();
            });

            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
            elements.githubLogin.addEventListener('click', githubLogin);
            elements.githubSync.addEventListener('click', githubSync);
            elements.exportData.addEventListener('click', exportData);
            elements.importData.addEventListener('click', importData);
            elements.exportCalendar.addEventListener('click', exportToCalendar);

            // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            elements.userAvatar.addEventListener('click', handleUserClick);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function checkAuthStatus() {
            const token = localStorage.getItem('github_token');
            const userData = localStorage.getItem('github_user');
            
            if (token && userData) {
                state.user.isLoggedIn = true;
                state.user = { ...state.user, ...JSON.parse(userData) };
                updateUserUI();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUserUI() {
            if (state.user.isLoggedIn) {
                elements.userAvatar.textContent = state.user.avatar || 'üë§';
                elements.userAvatar.title = state.user.username || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            } else {
                elements.userAvatar.textContent = 'üë§';
                elements.userAvatar.title = '–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ GitHub';
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∞–≤–∞—Ç–∞—Ä—É
        function handleUserClick() {
            if (state.user.isLoggedIn) {
                if (confirm('–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞?')) {
                    logout();
                }
            } else {
                githubLogin();
            }
        }

        // –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
        function logout() {
            localStorage.removeItem('github_token');
            localStorage.removeItem('github_user');
            state.user = { isLoggedIn: false, username: null, avatar: null };
            updateUserUI();
            showNotification('–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞');
        }

        // GitHub –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
        function githubLogin() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã OAuth flow
            const username = prompt('–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è GitHub:');
            if (username) {
                state.user = {
                    isLoggedIn: true,
                    username: username,
                    avatar: 'üöÄ'
                };
                localStorage.setItem('github_user', JSON.stringify(state.user));
                updateUserUI();
                showNotification(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${username}!`);
            }
        }

        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å GitHub
        function githubSync() {
            if (!state.user.isLoggedIn) {
                alert('–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub');
                return;
            }
            
            showNotification('–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å GitHub...');
            // –ò–º–∏—Ç–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
            setTimeout(() => {
                showNotification('–î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã!');
            }, 1500);
        }

        // –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
        function exportData() {
            const data = {
                tasks: state.tasks,
                goals: state.goals,
                habits: state.habits,
                productivities: state.productivities,
                exportedAt: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `productivity-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('–î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!');
        }

        // –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = (e) => {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const data = JSON.parse(event.target.result);
                        if (confirm('–ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏?')) {
                            state.tasks = data.tasks || [];
                            state.goals = data.goals || [];
                            state.habits = data.habits || [];
                            state.productivities = data.productivities || 0;
                            
                            saveAllData();
                            renderTasks();
                            renderGoals();
                            renderHabits();
                            updateDashboard();
                            
                            showNotification('–î–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!');
                        }
                    } catch (error) {
                        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // –≠–∫—Å–ø–æ—Ä—Ç –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å
        function exportToCalendar() {
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è .ics —Ñ–∞–π–ª–∞
            let icsContent = [
                'BEGIN:VCALENDAR',
                'VERSION:2.0',
                'PRODID:-//Productivity Manager//EN',
                'CALSCALE:GREGORIAN',
                'METHOD:PUBLISH'
            ];

            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á–∏ —Å –¥–µ–¥–ª–∞–π–Ω–∞–º–∏
            state.tasks.forEach(task => {
                if (!task.completed) {
                    icsContent.push(
                        'BEGIN:VEVENT',
                        `SUMMARY:${task.text}`,
                        `DTSTART:${new Date().toISOString().replace(/[-:]/g, '').split('.')[0]}Z`,
                        `DTEND:${new Date(Date.now() + 3600000).toISOString().replace(/[-:]/g, '').split('.')[0]}Z`,
                        `DESCRIPTION:–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ${task.priority}, –ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${task.tag}`,
                        'PRIORITY:5',
                        'END:VEVENT'
                    );
                }
            });

            // –î–æ–±–∞–≤–ª—è–µ–º —Ü–µ–ª–∏ —Å –¥–µ–¥–ª–∞–π–Ω–∞–º–∏
            state.goals.forEach(goal => {
                if (goal.deadline && !goal.completed) {
                    icsContent.push(
                        'BEGIN:VEVENT',
                        `SUMMARY:–¶–µ–ª—å: ${goal.title}`,
                        `DTSTART:${goal.deadline}T090000Z`,
                        `DTEND:${goal.deadline}T100000Z`,
                        `DESCRIPTION:–ü—Ä–æ–≥—Ä–µ—Å—Å: ${goal.progress}%`,
                        'PRIORITY:3',
                        'END:VEVENT'
                    );
                }
            });

            icsContent.push('END:VCALENDAR');

            const blob = new Blob([icsContent.join('\r\n')], { type: 'text/calendar' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'productivity-calendar.ics';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('–ö–∞–ª–µ–Ω–¥–∞—Ä—å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message) {
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä', { 
                    body: message, 
                    icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTIiIGZpbGw9IiM0Y2FmNTAiLz4KPHBhdGggZD0iTTMyIDE2TDI0IDI4TDI4IDMyTDM2IDI0TDQ0IDMyTDQ4IDI4TDQwIDE2SDMyWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTI0IDQwTDMwIDQ2TDM2IDQwTDQyIDQ2TDQ4IDQwTDM2IDI4TDI0IDQwWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+'
                });
            }
            
            // –¢–∞–∫–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º toast —Å–æ–æ–±—â–µ–Ω–∏–µ
            const toast = document.createElement('div');
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: #4caf50;
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            `;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                document.body.removeChild(toast);
            }, 3000);
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
        function saveAllData() {
            localStorage.setItem('productivity-tasks', JSON.stringify(state.tasks));
            localStorage.setItem('goals', JSON.stringify(state.goals));
            localStorage.setItem('habits', JSON.stringify(state.habits));
            localStorage.setItem('productivities', state.productivities.toString());
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            elements.tabs.forEach(tab => {
                tab.classList.toggle('active', tab.dataset.tab === tabName);
            });
            
            elements.modules.forEach(module => {
                module.style.display = module.id === tabName ? 'block' : 'none';
            });
            
            if (tabName === 'dashboard') {
                updateDashboard();
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏
        function addTask() {
            const text = elements.taskInput.value.trim();
            if (!text) return;
            
            const newTask = {
                id: Date.now(),
                text: text,
                completed: false,
                tag: elements.taskTag.value,
                priority: elements.taskPriority.value,
                date: new Date().toISOString(),
                comments: []
            };
            
            state.tasks.push(newTask);
            saveAllData();
            elements.taskInput.value = '';
            renderTasks();
            updateDashboard();
            
            showNotification('–ó–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
        }

        function toggleTaskCompletion(id) {
            const task = state.tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                saveAllData();
                renderTasks();
                updateDashboard();
                
                if (task.completed) {
                    showNotification(`–ó–∞–¥–∞—á–∞ "${task.text}" –∑–∞–≤–µ—Ä—à–µ–Ω–∞! üéâ`);
                }
            }
        }

        function deleteTask(id) {
            state.tasks = state.tasks.filter(t => t.id !== id);
            saveAllData();
            renderTasks();
            updateDashboard();
        }

        function renderTasks() {
            let filteredTasks = state.tasks;
            
            if (state.currentFilter === 'current') {
                filteredTasks = state.tasks.filter(t => !t.completed);
            } else if (state.currentFilter === 'completed') {
                filteredTasks = state.tasks.filter(t => t.completed);
            }
            
            elements.taskList.innerHTML = '';
            
            filteredTasks.forEach(task => {
                const li = document.createElement('li');
                li.className = `task-item ${task.completed ? 'completed' : ''}`;
                li.innerHTML = `
                    <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''}>
                    <div class="task-content">
                        <div class="task-text">${task.text}</div>
                        <div class="task-meta">
                            <span class="task-tag tag-${task.tag}">${getTagName(task.tag)}</span>
                            <span class="task-priority priority-${task.priority}">${getPriorityName(task.priority)}</span>
                        </div>
                        ${task.comments && task.comments.length > 0 ? `
                            <div class="task-comments">
                                ${task.comments.map(comment => `
                                    <div class="comment">üí¨ ${comment}</div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                    <div class="task-actions">
                        <button class="task-btn btn-comment">üí¨</button>
                        <button class="task-btn btn-delete">üóëÔ∏è</button>
                    </div>
                `;
                
                li.querySelector('.task-checkbox').addEventListener('change', () => toggleTaskCompletion(task.id));
                li.querySelector('.btn-delete').addEventListener('click', () => deleteTask(task.id));
                li.querySelector('.btn-comment').addEventListener('click', () => {
                    const comment = prompt('–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–¥–∞—á–µ:');
                    if (comment) {
                        if (!task.comments) task.comments = [];
                        task.comments.push(comment);
                        saveAllData();
                        renderTasks();
                    }
                });
                
                elements.taskList.appendChild(li);
            });
        }

        function getTagName(tag) {
            const tags = {
                work: '–†–∞–±–æ—Ç–∞',
                personal: '–õ–∏—á–Ω–æ–µ',
                health: '–ó–¥–æ—Ä–æ–≤—å–µ',
                learning: '–û–±—É—á–µ–Ω–∏–µ'
            };
            return tags[tag] || tag;
        }

        function getPriorityName(priority) {
            const priorities = {
                high: '–í—ã—Å–æ–∫–∏–π',
                medium: '–°—Ä–µ–¥–Ω–∏–π',
                low: '–ù–∏–∑–∫–∏–π'
            };
            return priorities[priority] || priority;
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ü–µ–ª—è–º–∏
        function addGoal() {
            const title = elements.goalInput.value.trim();
            const deadline = elements.goalDeadline.value;
            
            if (!title) return;
            
            const newGoal = {
                id: Date.now(),
                title: title,
                deadline: deadline,
                completed: false,
                progress: 0,
                subtasks: [],
                createdAt: new Date().toISOString()
            };
            
            state.goals.push(newGoal);
            saveAllData();
            elements.goalInput.value = '';
            elements.goalDeadline.value = '';
            renderGoals();
            
            showNotification('–¶–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
        }

        function toggleGoalCompletion(id) {
            const goal = state.goals.find(g => g.id === id);
            if (goal) {
                goal.completed = !goal.completed;
                saveAllData();
                renderGoals();
                updateDashboard();
            }
        }

        function deleteGoal(id) {
            state.goals = state.goals.filter(g => g.id !== id);
            saveAllData();
            renderGoals();
        }

        function addSubtask(goalId) {
            const text = prompt('–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É:');
            if (text) {
                const goal = state.goals.find(g => g.id === goalId);
                if (goal) {
                    if (!goal.subtasks) goal.subtasks = [];
                    goal.subtasks.push({
                        id: Date.now(),
                        text: text,
                        completed: false
                    });
                    updateGoalProgress(goal);
                    saveAllData();
                    renderGoals();
                }
            }
        }

        function toggleSubtask(goalId, subtaskId) {
            const goal = state.goals.find(g => g.id === goalId);
            if (goal && goal.subtasks) {
                const subtask = goal.subtasks.find(s => s.id === subtaskId);
                if (subtask) {
                    subtask.completed = !subtask.completed;
                    updateGoalProgress(goal);
                    saveAllData();
                    renderGoals();
                }
            }
        }

        function updateGoalProgress(goal) {
            if (!goal.subtasks || goal.subtasks.length === 0) {
                goal.progress = goal.completed ? 100 : 0;
                return;
            }
            
            const completed = goal.subtasks.filter(s => s.completed).length;
            goal.progress = Math.round((completed / goal.subtasks.length) * 100);
            
            if (goal.progress === 100) {
                goal.completed = true;
                showNotification(`–¶–µ–ª—å "${goal.title}" –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞! üéä`);
            }
        }

        function renderGoals() {
            elements.goalsContainer.innerHTML = '';
            
            state.goals.forEach(goal => {
                const goalCard = document.createElement('div');
                goalCard.className = `goal-card ${goal.completed ? 'completed' : ''}`;
                
                goalCard.innerHTML = `
                    <div class="goal-header">
                        <h3 class="goal-title">${goal.title}</h3>
                        ${goal.deadline ? `
                            <span class="goal-deadline">üìÖ ${new Date(goal.deadline).toLocaleDateString()}</span>
                        ` : ''}
                    </div>
                    
                    <div class="goal-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${goal.progress}%"></div>
                        </div>
                        <div class="progress-text">${goal.progress}% –∑–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                    </div>
                    
                    ${goal.subtasks && goal.subtasks.length > 0 ? `
                        <div class="goal-subtasks">
                            ${goal.subtasks.map(subtask => `
                                <div class="subtask">
                                    <input type="checkbox" ${subtask.completed ? 'checked' : ''}>
                                    <span>${subtask.text}</span>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                    
                    <div class="task-actions">
                        <button class="task-btn btn-comment">‚ûï –ü–æ–¥–∑–∞–¥–∞—á–∞</button>
                        <button class="task-btn btn-delete">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `;
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —á–µ–∫–±–æ–∫—Å–æ–≤ –ø–æ–¥–∑–∞–¥–∞—á
                if (goal.subtasks) {
                    goal.subtasks.forEach((subtask, index) => {
                        const checkbox = goalCard.querySelectorAll('.subtask input')[index];
                        checkbox.addEventListener('change', () => toggleSubtask(goal.id, subtask.id));
                    });
                }
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
                goalCard.querySelector('.btn-comment').addEventListener('click', () => addSubtask(goal.id));
                goalCard.querySelector('.btn-delete').addEventListener('click', () => deleteGoal(goal.id));
                
                elements.goalsContainer.appendChild(goalCard);
            });
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞
        function startTimer() {
            if (state.timer.isRunning) return;
            
            state.timer.isRunning = true;
            state.timer.interval = setInterval(() => {
                if (state.timer.time > 0) {
                    state.timer.time--;
                    updateTimerDisplay();
                } else {
                    clearInterval(state.timer.interval);
                    state.timer.isRunning = false;
                    
                    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
                    if (state.timer.mode === 'work') {
                        state.productivities++;
                        localStorage.setItem('productivities', state.productivities);
                        showNotification('–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞! üéØ –í—Ä–µ–º—è –¥–ª—è –ø–µ—Ä–µ—Ä—ã–≤–∞.');
                        switchTimerMode('break');
                    } else {
                        showNotification('–ü–µ—Ä–µ—Ä—ã–≤ –∑–∞–≤–µ—Ä—à–µ–Ω! ‚è∞ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç–∞—Ç—å.');
                        switchTimerMode('work');
                    }
                    
                    updateDashboard();
                    startTimer();
                }
            }, 1000);
        }

        function pauseTimer() {
            clearInterval(state.timer.interval);
            state.timer.isRunning = false;
        }

        function resetTimer() {
            pauseTimer();
            updateTimerMode();
        }

        function switchTimerMode(mode) {
            state.timer.mode = mode;
            updateTimerMode();
        }

        function updateTimerMode() {
            const time = state.timer.mode === 'work' 
                ? state.timer.workTime * 60 
                : state.timer.breakTime * 60;
            
            state.timer.time = time;
            updateTimerDisplay();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É —Ä–µ–∂–∏–º–∞
            elements.modeBtns.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.mode === state.timer.mode);
            });
        }

        function updateTimerSettings() {
            state.timer.workTime = parseInt(elements.workTimeInput.value) || 25;
            state.timer.breakTime = parseInt(elements.breakTimeInput.value) || 5;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            localStorage.setItem('work-time', state.timer.workTime);
            localStorage.setItem('break-time', state.timer.breakTime);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω –Ω–µ –∑–∞–ø—É—â–µ–Ω
            if (!state.timer.isRunning) {
                updateTimerMode();
            }
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(state.timer.time / 60);
            const seconds = state.timer.time % 60;
            elements.timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç—Ä–µ–∫–µ—Ä–∞ –ø—Ä–∏–≤—ã—á–µ–∫
        function addHabit() {
            const text = elements.habitInput.value.trim();
            if (!text) return;
            
            const newHabit = {
                id: Date.now(),
                title: text,
                completedDates: [],
                streak: 0,
                createdAt: new Date().toISOString()
            };
            
            state.habits.push(newHabit);
            saveAllData();
            elements.habitInput.value = '';
            renderHabits();
            updateDashboard();
            
            showNotification('–ü—Ä–∏–≤—ã—á–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
        }

        function toggleHabitDate(habitId, dateStr) {
            const habit = state.habits.find(h => h.id === habitId);
            if (!habit) return;
            
            const dateIndex = habit.completedDates.indexOf(dateStr);
            
            if (dateIndex === -1) {
                habit.completedDates.push(dateStr);
            } else {
                habit.completedDates.splice(dateIndex, 1);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º streak
            updateHabitStreak(habit);
            
            saveAllData();
            renderHabits();
            updateDashboard();
        }

        function updateHabitStreak(habit) {
            const sortedDates = habit.completedDates.sort().reverse();
            let streak = 0;
            let currentDate = new Date();
            
            for (let i = 0; i < sortedDates.length; i++) {
                const habitDate = new Date(sortedDates[i]);
                const diffTime = Math.abs(currentDate - habitDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays === streak + 1) {
                    streak++;
                } else {
                    break;
                }
            }
            
            habit.streak = streak;
            
            if (streak > 0 && streak % 7 === 0) {
                showNotification(`–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! üî• ${streak} –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ —Å –ø—Ä–∏–≤—ã—á–∫–æ–π "${habit.title}"`);
            }
        }

        function deleteHabit(id) {
            state.habits = state.habits.filter(h => h.id !== id);
            saveAllData();
            renderHabits();
            updateDashboard();
        }

        function renderHabits() {
            elements.habitsContainer.innerHTML = '';
            
            state.habits.forEach(habit => {
                const habitCard = document.createElement('div');
                habitCard.className = 'habit-card';
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
                const last7Days = [];
                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    last7Days.push(date.toISOString().split('T')[0]);
                }
                
                habitCard.innerHTML = `
                    <div class="habit-header">
                        <h3 class="habit-title">${habit.title}</h3>
                        <span class="habit-streak">üî• ${habit.streak} –¥–Ω–µ–π</span>
                    </div>
                    <div class="habit-calendar">
                        ${last7Days.map(date => {
                            const isCompleted = habit.completedDates.includes(date);
                            const isToday = date === new Date().toISOString().split('T')[0];
                            const day = new Date(date).getDate();
                            
                            return `
                                <div class="calendar-day ${isCompleted ? 'day-completed' : isToday ? 'day-empty' : 'day-missed'}" 
                                     data-date="${date}">
                                    ${day}
                                </div>
                            `;
                        }).join('')}
                    </div>
                    <button class="task-btn btn-delete" style="margin-top: 15px;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                `;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –¥–Ω–µ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—è
                habitCard.querySelectorAll('.calendar-day').forEach(day => {
                    day.addEventListener('click', () => {
                        toggleHabitDate(habit.id, day.dataset.date);
                    });
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏–≤—ã—á–∫–∏
                habitCard.querySelector('.btn-delete').addEventListener('click', () => {
                    deleteHabit(habit.id);
                });
                
                elements.habitsContainer.appendChild(habitCard);
            });
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞
        function updateDashboard() {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–∏—Ñ—Ä—ã
            elements.currentTasks.textContent = state.tasks.filter(t => !t.completed).length;
            elements.completedTasks.textContent = state.tasks.filter(t => t.completed).length;
            elements.productivities.textContent = state.productivities;
            
            // –°—á–∏—Ç–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π streak —Å—Ä–µ–¥–∏ –ø—Ä–∏–≤—ã—á–µ–∫
            const maxStreak = state.habits.length > 0 
                ? Math.max(...state.habits.map(h => h.streak)) 
                : 0;
            elements.habitStreak.textContent = maxStreak;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≥—Ä–∞—Ñ–∏–∫–∏
            updateCharts();
        }

        function updateCharts() {
            updateProductivityChart();
            updateWeeklyChart();
        }

        function updateProductivityChart() {
            const ctx = document.getElementById('productivity-chart').getContext('2d');
            
            // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –∑–∞–¥–∞—á–∏ –ø–æ —Ç–µ–≥–∞–º
            const tags = {};
            state.tasks.forEach(task => {
                if (!tags[task.tag]) tags[task.tag] = 0;
                if (task.completed) tags[task.tag]++;
            });
            
            if (window.productivityChart) {
                window.productivityChart.destroy();
            }
            
            window.productivityChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(tags).map(getTagName),
                    datasets: [{
                        label: '–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏',
                        data: Object.values(tags),
                        backgroundColor: [
                            'rgba(76, 175, 80, 0.7)',
                            'rgba(56, 142, 60, 0.7)',
                            'rgba(104, 159, 56, 0.7)',
                            'rgba(46, 125, 50, 0.7)'
                        ],
                        borderColor: [
                            'rgba(76, 175, 80, 1)',
                            'rgba(56, 142, 60, 1)',
                            'rgba(104, 159, 56, 1)',
                            'rgba(46, 125, 50, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: '–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º',
                            color: '#2e7d32',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1,
                                color: '#558b2f'
                            },
                            grid: {
                                color: 'rgba(200, 230, 201, 0.3)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#558b2f'
                            },
                            grid: {
                                color: 'rgba(200, 230, 201, 0.3)'
                            }
                        }
                    }
                }
            });
        }

        function updateWeeklyChart() {
            const ctx = document.getElementById('weekly-chart').getContext('2d');
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
            const days = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'];
            const completedByDay = [0, 0, 0, 0, 0, 0, 0];
            
            state.tasks.forEach(task => {
                if (task.completed && task.date) {
                    const day = new Date(task.date).getDay();
                    // –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ = 0, –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ = 1, etc.
                    const adjustedDay = day === 0 ? 6 : day - 1;
                    completedByDay[adjustedDay]++;
                }
            });
            
            if (window.weeklyChart) {
                window.weeklyChart.destroy();
            }
            
            window.weeklyChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: days,
                    datasets: [{
                        label: '–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ –¥–Ω—è–º',
                        data: completedByDay,
                        backgroundColor: 'rgba(76, 175, 80, 0.2)',
                        borderColor: 'rgba(76, 175, 80, 1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: '–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏',
                            color: '#2e7d32',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#558b2f'
                            },
                            grid: {
                                color: 'rgba(200, 230, 201, 0.3)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#558b2f'
                            },
                            grid: {
                                color: 'rgba(200, 230, 201, 0.3)'
                            }
                        }
                    }
                }
            });
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
