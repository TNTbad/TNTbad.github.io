<!DOCTYPE html>
<html>
<head>
    <title>2D Minecraft TNT Game</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: #8B8B8B; 
            font-family: Arial, sans-serif;
        }
        canvas { 
            display: block; 
            background: #7EC850; 
            margin: 0 auto;
        }
        #info {
            text-align: center;
            padding: 10px;
            color: white;
        }
    </style>
</head>
<body>
    <div id="info">
        <h1>2D Minecraft TNT</h1>
        <p>Управление: Стрелки (движение), Пробел (бросить TNT)</p>
    </div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
        // Инициализация игры
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        // Игрок
        const player = {
            x: 50,
            y: 500,
            width: 40,
            height: 60,
            color: "#4B8BBE",
            speed: 5
        };

        // TNT и взрывы
        const tnts = [];
        const explosions = [];
        const blocks = [];

        // Создаем блоки (как в Minecraft)
        for (let i = 0; i < 20; i++) {
            blocks.push({
                x: Math.random() * (canvas.width - 50),
                y: Math.random() * (canvas.height - 100) + 50,
                width: 40,
                height: 40,
                color: "#8B4513"
            });
        }

        // Управление
        const keys = {
            left: false,
            right: false,
            up: false,
            down: false
        };

        // Обработка клавиш
        document.addEventListener("keydown", (e) => {
            if (e.key === "ArrowLeft") keys.left = true;
            if (e.key === "ArrowRight") keys.right = true;
            if (e.key === "ArrowUp") keys.up = true;
            if (e.key === "ArrowDown") keys.down = true;
            if (e.key === " ") throwTNT();
        });

        document.addEventListener("keyup", (e) => {
            if (e.key === "ArrowLeft") keys.left = false;
            if (e.key === "ArrowRight") keys.right = false;
            if (e.key === "ArrowUp") keys.up = false;
            if (e.key === "ArrowDown") keys.down = false;
        });

        // Бросок TNT
        function throwTNT() {
            tnts.push({
                x: player.x + player.width / 2,
                y: player.y,
                width: 20,
                height: 20,
                color: "#FF0000",
                speedY: -10,
                speedX: (Math.random() - 0.5) * 5,
                fuse: 100
            });
        }

        // Взрыв TNT
        function explodeTNT(tnt) {
            explosions.push({
                x: tnt.x,
                y: tnt.y,
                radius: 0,
                maxRadius: 80,
                color: "#FF4500"
            });

            // Уничтожение блоков
            for (let i = blocks.length - 1; i >= 0; i--) {
                const block = blocks[i];
                const dist = Math.sqrt(
                    Math.pow(block.x + block.width / 2 - tnt.x, 2) +
                    Math.pow(block.y + block.height / 2 - tnt.y, 2)
                );
                if (dist < 80) {
                    blocks.splice(i, 1);
                }
            }
        }

        // Игровой цикл
        function gameLoop() {
            // Очистка экрана
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Движение игрока
            if (keys.left) player.x -= player.speed;
            if (keys.right) player.x += player.speed;
            if (keys.up) player.y -= player.speed;
            if (keys.down) player.y += player.speed;

            // Границы экрана
            player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
            player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));

            // Рисуем игрока
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width,player.height);

            // Рисуем блоки
            blocks.forEach(block => {
                ctx.fillStyle = block.color;
                ctx.fillRect(block.x, block.y, block.width, block.height);
            });

            // Обновляем TNT
            for (let i = tnts.length - 1; i >= 0; i--) {
                const tnt = tnts[i];
                tnt.y += tnt.speedY;
                tnt.x += tnt.speedX;
                tnt.speedY += 0.3;
                tnt.fuse--;

                ctx.fillStyle = tnt.color;
                ctx.fillRect(tnt.x, tnt.y, tnt.width, tnt.height);

                // Взрыв
                if (tnt.fuse <= 0 || tnt.y > canvas.height) {
                    explodeTNT(tnt);
                    tnts.splice(i, 1);
                }
            }

            // Рисуем взрывы
            for (let i = explosions.length - 1; i >= 0; i--) {
                const explosion = explosions[i];
                explosion.radius += 2;

                ctx.beginPath();
                ctx.arc(explosion.x, explosion.y, explosion.radius, 0, Math.PI * 2);
                ctx.fillStyle = explosion.color;
                ctx.globalAlpha = 1 - (explosion.radius / explosion.maxRadius);
                ctx.fill();
                ctx.globalAlpha = 1;

                if (explosion.radius >= explosion.maxRadius) {
                    explosions.splice(i, 1);
                }
            }

            requestAnimationFrame(gameLoop);
        }

        // Запуск игры
        gameLoop();
    </script>
</body>
</html>
